<!DOCTYPE html>
<html>
    <!-- Head -->
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="ladyrick">
    <meta name="description" itemprop="description" content="介绍参考：https://blog.csdn.net/hemingliang1987/article/details/11630409简单地说，一个float型实数在内存中占4个字节，即32个二进制bit，从低位到高位依次叫第0位到第31位。这32位可以分为3个部分：符号位（第31位），阶码（第30位到第23位共8位），尾数（最低23位）。 

符号位。最高位也就是第31位表示这个实数是正数还是负数，为0表示正数或0，为1表示负数。
阶码。第30位到第23位这8个二进制位表示该实数转化为规格化的二进制实数后的指数与127(127即所谓偏移量)之和即所谓阶码。规格化的二进制实数的指数只能在-127~+127之间，所以，一个float型数的最大值在+2^127即+3.4*10^38，最小值在-2^127即-3.4*10^38。 
尾数。其他最低的23位即第22位到第0位表示该实数转化为规格化的二进制实数后小数点以后的其余各位即所谓尾数。
">
    <meta name="keywords" content>

    <!-- Page Title -->
    
        <title>C++ float数据在内存中的表示形式 | Hello World</title>
    
    <link rel="icon" href="/img/avatar-default.png">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="/js/script.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    
    <style>
        .deactiveColor{
            color: #37474f;
        }
        .activeColor{
            color: #006064;
        }
        a:hover{
            color: #006064;
        }
        .header-btn{
            color: #37474f;
        }
        
        .post-content img{
            margin: 50px auto;
        }
        
    </style>
</head>
    <body>
        <div class="container">

            <!-- Top Anchor -->
            <div id="top"></div>

            <!-- Header -->
            <header class="header-wrapper">
    <div class="header-title-wrapper">
        <!-- Page Title -->
        <p class="header-title">
             
                
                    C++ float数据在内存中的表示形式
                
            
        </p>  
    </div>    

    
        <!-- Division Line -->
        <div class="division"></div> 
    
    
    <div class="header-detail">
        <!-- Header Button -->
        <div class="header-btn-wrapper">
            
                <span>
                    <a class="home-btn header-btn" href="/" title="homepage"><i class="fa fa-home"></i></a>
                </span>

                
                    <span>
                        <a class="catalog-btn header-btn"><i class="fa fa-list-ul"></i></a>
                    </span>
                
            
        </div>
    </div>
</header>

            <!-- Main -->
            <main>
                <article class="post-wrapper">
    

    
        <!-- Article Catalog -->
        <div class="catalog-dropdown col-xs-12 col-sm-12">
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#例一"><span class="toc-number">2.</span> <span class="toc-text">例一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第一步：将178-125表示成二进制数"><span class="toc-number">2.1.</span> <span class="toc-text">第一步：将178.125表示成二进制数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第二步：将二进制形式的浮点实数转化为规格化的形式"><span class="toc-number">2.2.</span> <span class="toc-text">第二步：将二进制形式的浮点实数转化为规格化的形式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#例二"><span class="toc-number">3.</span> <span class="toc-text">例二</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第一步：将-0-15625表示成二进制形式"><span class="toc-number">3.1.</span> <span class="toc-text">第一步：将-0.15625表示成二进制形式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第二步：将二进制形式的浮点数转化为规格化的形式"><span class="toc-number">3.2.</span> <span class="toc-text">第二步：将二进制形式的浮点数转化为规格化的形式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#验证"><span class="toc-number">4.</span> <span class="toc-text">验证</span></a></li></ol>
        </div>
    

    
        <!--For now, Lightbox Only Show in Post Layout -->
        

        
        
    

    

    <!-- Article Content -->
    <div class="post-content">
        <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>参考：<a href="https://blog.csdn.net/hemingliang1987/article/details/11630409" target="_blank" rel="noopener">https://blog.csdn.net/hemingliang1987/article/details/11630409</a><br>简单地说，一个float型实数在内存中占4个字节，即32个二进制bit，从低位到高位依次叫第0位到第31位。<br>这32位可以分为3个部分：符号位（第31位），阶码（第30位到第23位共8位），尾数（最低23位）。 </p>
<ol>
<li>符号位。最高位也就是第31位表示这个实数是正数还是负数，为0表示正数或0，为1表示负数。</li>
<li>阶码。第30位到第23位这8个二进制位表示该实数转化为规格化的二进制实数后的指数与127(127即所谓偏移量)之和即所谓阶码。<br>规格化的二进制实数的指数只能在-127~+127之间，所以，一个float型数的最大值在+2^127即+3.4*10^38，最小值在-2^127即-3.4*10^38。 </li>
<li>尾数。其他最低的23位即第22位到第0位表示该实数转化为规格化的二进制实数后小数点以后的其余各位即所谓尾数。</li>
</ol>
<a id="more"></a>
<hr>
<h1 id="例一"><a href="#例一" class="headerlink" title="例一"></a>例一</h1><p>例如，将十进制178.125表示成机器内的32个字节的二进制形式。</p>
<h2 id="第一步：将178-125表示成二进制数"><a href="#第一步：将178-125表示成二进制数" class="headerlink" title="第一步：将178.125表示成二进制数"></a>第一步：将178.125表示成二进制数</h2><p>(178.125)(十进制数)=(10110010.001)(二进制形式)</p>
<h2 id="第二步：将二进制形式的浮点实数转化为规格化的形式"><a href="#第二步：将二进制形式的浮点实数转化为规格化的形式" class="headerlink" title="第二步：将二进制形式的浮点实数转化为规格化的形式"></a>第二步：将二进制形式的浮点实数转化为规格化的形式</h2><p>小数点向左移动7个二进制位可以得到：<br>10110010.001=1.0110010001*2^7<br>因而产生了以下三项: </p>
<ul>
<li>符号位：该数为正数，故第31位为0，占一个二进制位。</li>
<li>阶码：指数为7，故其阶码为127+7=134=(10000110)(二进制)，占从第30到第23共8个二进制位。</li>
<li>尾数为小数点后的部分， 即0110010001。因为尾数共23个二进制位，在后面补13个0，即：01100100010000000000000</li>
</ul>
<p>所以，178.125在内存中的实际表示方式为:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 10000110 01100100010000000000000</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="例二"><a href="#例二" class="headerlink" title="例二"></a>例二</h1><p>再如，将-0.15625表示成机器内的32个字节的形式. </p>
<h2 id="第一步：将-0-15625表示成二进制形式"><a href="#第一步：将-0-15625表示成二进制形式" class="headerlink" title="第一步：将-0.15625表示成二进制形式"></a>第一步：将-0.15625表示成二进制形式</h2><p>(-0.15625)(十进制数)=(-0.00101)(二进制形式)</p>
<h2 id="第二步：将二进制形式的浮点数转化为规格化的形式"><a href="#第二步：将二进制形式的浮点数转化为规格化的形式" class="headerlink" title="第二步：将二进制形式的浮点数转化为规格化的形式"></a>第二步：将二进制形式的浮点数转化为规格化的形式</h2><p>小数点向右移动3个二进制位可以得到：<br>-0.00101=-1.01*2^(-3)<br>同样，产生了三项: </p>
<ul>
<li>符号位：该数为负数，故第31位为1，占一个二进制位。</li>
<li>阶码：指数为-3，故其阶码为127+(-3)=124=01111100，占从第30到第23共8个二进制位。</li>
<li>尾数为小数点后的01，当然后面要补21个0。<br>所以，-0.15625在内存中的实际表示形式为: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 01111100 01000000000000000000000</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h1><p>可以通过以下的C++程序验证之。记得添加编译选项<code>--std=c++11</code><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;typeinfo&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cast2bits</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">bits</span> &#123;</span></span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b7 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b6 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b5 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b4 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b3 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b2 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b1 : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">char</span> b0 : <span class="number">1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    <span class="built_in">ostringstream</span> oss;</span><br><span class="line">    <span class="built_in">ostringstream</span> data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">explicit</span> <span class="title">cast2bits</span>(<span class="title">const</span> <span class="title">T</span> &amp;<span class="title">input</span>) &#123;</span></span><br><span class="line">        data &lt;&lt; input &lt;&lt; <span class="string">" type: "</span> &lt;&lt; <span class="keyword">typeid</span>(input).name();</span><br><span class="line">        <span class="keyword">const</span> T *pTInput = &amp;input;</span><br><span class="line">        <span class="keyword">auto</span> *pBitsinput = (bits *) pTInput;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="keyword">sizeof</span>(T) / <span class="keyword">sizeof</span>(bits);</span><br><span class="line">        length = <span class="number">9</span> * n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            oss &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b0)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b1)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b2)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b3)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b4)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b5)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b6)</span><br><span class="line">                &lt;&lt; (<span class="keyword">int</span>) ((pBitsinput + i)-&gt;b7)</span><br><span class="line">                &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;os, <span class="keyword">const</span> cast2bits &amp;c) &#123;</span><br><span class="line">        os &lt;&lt; c.data.str() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        os &lt;&lt; <span class="string">"M"</span> &lt;&lt; <span class="built_in">string</span>((<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span>) (c.length - <span class="number">2</span>), <span class="string">' '</span>) &lt;&lt; <span class="string">"L"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        os &lt;&lt; c.oss.str() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> os;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">178.125f</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">-0.15625f</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>输出为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">178.125 type: f</span><br><span class="line">M L</span><br><span class="line">01000011 00110010 00100000 00000000 </span><br><span class="line"></span><br><span class="line">-0.15625 type: f</span><br><span class="line">M L</span><br><span class="line">10111110 00100000 00000000 00000000</span><br></pre></td></tr></table></figure></p>
<p>最后，这个程序其实不仅可以处理浮点数，也可以处理其他各种数据类型在内存中的表示形式。<br>比如，你可以试试以下代码的输出结果。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">178.125</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">-0.15625</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">123</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">123l</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; cast2bits(<span class="number">123l</span>l) &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure></p>
  
    </div> 

    
        <!-- Division Line -->
        <div class="division"></div> 
    

    <div class="post-info-wrapper">
            
                    <!-- Post Info -->
                    <p class="post-date">2019-07-28</p>
                    
                    
                        <p class="post-info-categories">
                            
                        </p>
                    

                    
            
    </div>
</article>


    

            </main>

            <!-- 'To Top' Btn-->
            
                <div id="to-top">
    <a href="#top" class="toTop">
        <i class="fa fa-pagelines"></i>
    </a>
</div>
            

            <!-- Footer -->
            
                <footer class="footer-wrapper col-xs-12 col-sm-12">
    <div class="footer-banner-wrapper">
        <p class="footer-banner">自豪地使用 <strong><a href="https://hexo.io/" title="Hexo">Hexo</a></strong>
        & <strong><a href="https://github.com/Lonezj/hexo-theme-wind" title="Wind">Wind</a></strong></p>
    </div>
</footer>
            
        </div>

        <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
        <link rel="stylesheet" href="/css/atelier-plateau-light.min.css" type="text/css">
        <script src="//cdn.bootcss.com/prettify/r298/prettify.min.js" type="text/javascript"></script>
    </body>
</html>